<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
</h:head>

<h:body>
    <h:dataTable value="#{humanService.getAllHumans()}" var="hum"
                 styleClass="article-table"
                 rules="all" id="result-table">
        <h:column>
            <f:facet name="header">Id</f:facet>
            #{hum.id}
        </h:column>
        <h:column>
            <f:facet name="header">Name</f:facet>
            #{hum.name}
        </h:column>
        <h:column>
            <f:facet name="header">Email</f:facet>
            #{hum.email}
        </h:column>
        <h:column>
            <f:facet name="header">Role</f:facet>
            #{hum.role}
        </h:column>
        <h:column>
            <f:facet name="header">Status</f:facet>
            #{hum.status}
        </h:column>
    </h:dataTable>

    <fieldset>
        <legend>Change human approve</legend>
        <h:form id="approveForm">
            <h:outputText value="Human id"/>
            <h:inputText binding="#{humanId}" converter="javax.faces.Integer"/>
            <br/>
            <h:commandButton id="approveButton" value="Change approve" action="#{humanService.changeStatus(humanId.value)}">
                <f:ajax execute="@form" render="approveForm"/>
            </h:commandButton>
            <br/>
            <h:message class="error" for="approveButton"/>
        </h:form>
    </fieldset>

    <fieldset>
        <legend>Change human approve</legend>
        <h:form id="roleForm">
            <h:outputText value="Human id"/>
            <h:inputText binding="#{humanId}" converter="javax.faces.Integer"/>
            <br/>
            <h:commandButton id="roleButton" value="Change role" action="#{humanService.changeRole(humanId.value)}">
                <f:ajax execute="@form" render="roleForm"/>
            </h:commandButton>
            <br/>
            <h:message class="error" for="roleButton"/>
        </h:form>
    </fieldset>
    <a href="http://archlinux:8085/logout">Logout</a>
    <br/>
    <a href="http://archlinux:8085/human_profile.xhtml">Back to profile</a>
    <br/>
    <h:outputLink value="http://localhost:8080/moderator_page.xhtml" rendered="#{humanService.moderator}">MODERATOR PAGE</h:outputLink>
    <!--<img src="https://regnum.ru/uploads/pictures/news/2016/08/20/regnum_picture_14716804297436014_big.jpg" width="100%" alt="Вова Путин Великий"/>-->

</h:body>
</html>
